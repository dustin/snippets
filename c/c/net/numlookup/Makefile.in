CFLAGS=@CFLAGS@ @DEFS@ -DMYMALLOC
LIBS=@LIBS@
LDFLAGS=$(LIBS)
MAKESO=@MAKESO@
OBJS=libparselist.o mymalloc.o hash.o parselist.o
MYLIBS=libparselist.so
EXES=parselist
LINT=@LINT@
LINTFLAGS=@DEFS@
LINTS=parselist.ln libparselist.ln mymalloc.ln hash.ln parselist.ln

.SUFFIXES: .c .o .l .a .ln .so

all: parselist libparselist.so

parselist: parselist.o parselist.h
	rm -f parselist
	$(CC) -o parselist parselist.o $(LDFLAGS)

libparselist.so: libparselist.o mymalloc.o hash.o parselist.h
	rm -f libparselist.so
	$(MAKESO) -o libparselist.so libparselist.o mymalloc.o hash.o

clean:
	rm -f $(EXES) $(MYLIBS) $(OBJS) $(LINTS)

lint: $(LINTS)
	$(LINT) $(LINTFLAGS) $(LINTS)

.c.ln: $<
	$(LINT) $(LINTFLAGS) -c $<
